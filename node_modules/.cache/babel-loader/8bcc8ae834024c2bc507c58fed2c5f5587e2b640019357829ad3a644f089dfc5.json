{"ast":null,"code":"import _slicedToArray from\"/Users/igorkuznecov/dev/mesto-react/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React from'react';import{useNavigate}from'react-router-dom';import InfoTooltip from'../InfoTooltip/InfoTooltip';import{register}from'../../utils/auth';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";export default function Register(){var navigate=useNavigate();var _React$useState=React.useState(''),_React$useState2=_slicedToArray(_React$useState,2),email=_React$useState2[0],setEmail=_React$useState2[1];var _React$useState3=React.useState(''),_React$useState4=_slicedToArray(_React$useState3,2),password=_React$useState4[0],setPassword=_React$useState4[1];var _React$useState5=React.useState(false),_React$useState6=_slicedToArray(_React$useState5,2),isInfoPopupOpen=_React$useState6[0],setIsInfoPopupOpen=_React$useState6[1];var _React$useState7=React.useState(false),_React$useState8=_slicedToArray(_React$useState7,2),isRegisterSuccess=_React$useState8[0],setIsRegisterSuccess=_React$useState8[1];function handleEmailChange(e){setEmail(e.target.value);}function handlePasswordChange(e){setPassword(e.target.value);}function handleSubmit(e){e.preventDefault();register(password,email).then(function(res){console.log(res);if(res.data){setIsRegisterSuccess(true);setIsInfoPopupOpen(true);}else{setIsRegisterSuccess(false);setIsInfoPopupOpen(true);}}).catch(function(res){return console.log(\"catch err \".concat(res));});}function goToLogin(){navigate('/sign-in',{replace:false});}function closeInfoPopup(){setIsInfoPopupOpen(false);if(isRegisterSuccess){setTimeout(function(){navigate('/sign-in',{replace:true});},500);}}return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(InfoTooltip,{isOpen:isInfoPopupOpen,success:isRegisterSuccess,onClose:closeInfoPopup}),/*#__PURE__*/_jsxs(\"section\",{className:\"register\",children:[/*#__PURE__*/_jsx(\"h2\",{className:\"register__title\",children:\"\\u0420\\u0435\\u0433\\u0438\\u0441\\u0442\\u0440\\u0430\\u0446\\u0438\\u044F\"}),/*#__PURE__*/_jsxs(\"form\",{name:\"register-form\",className:\"form register-form\",onSubmit:handleSubmit,children:[/*#__PURE__*/_jsx(\"input\",{required:true,minLength:\"6\",maxLength:\"40\",placeholder:\"Email\",type:\"email\",className:\"form__input form__input_theme-black form__input_register-email\",name:\"register-form-email\",value:email,onChange:handleEmailChange}),/*#__PURE__*/_jsx(\"input\",{required:true,minLength:\"4\",maxLength:\"200\",placeholder:\"\\u041F\\u0430\\u0440\\u043E\\u043B\\u044C\",type:\"password\",className:\"form__input form__input_theme-black form__input_register-password\",name:\"register-form-password\",value:password,onChange:handlePasswordChange}),/*#__PURE__*/_jsx(\"button\",{type:\"submit\",className:\"form__save-button form__save-button_theme-white\",name:\"register-form-save-button\",children:\"\\u0417\\u0430\\u0440\\u0435\\u0433\\u0438\\u0441\\u0442\\u0440\\u0438\\u0440\\u043E\\u0432\\u0430\\u0442\\u044C\\u0441\\u044F\"}),/*#__PURE__*/_jsxs(\"span\",{className:\"register__text\",children:[\"\\u0423\\u0436\\u0435 \\u0437\\u0430\\u0440\\u0435\\u0433\\u0438\\u0441\\u0442\\u0440\\u0438\\u0440\\u043E\\u0432\\u0430\\u043D\\u044B?\",' ',/*#__PURE__*/_jsx(\"a\",{className:\"register__link\",onClick:goToLogin,children:\"\\u0412\\u043E\\u0439\\u0442\\u0438\"})]})]})]})]});}","map":{"version":3,"names":["React","useNavigate","InfoTooltip","register","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","Register","navigate","_React$useState","useState","_React$useState2","_slicedToArray","email","setEmail","_React$useState3","_React$useState4","password","setPassword","_React$useState5","_React$useState6","isInfoPopupOpen","setIsInfoPopupOpen","_React$useState7","_React$useState8","isRegisterSuccess","setIsRegisterSuccess","handleEmailChange","e","target","value","handlePasswordChange","handleSubmit","preventDefault","then","res","console","log","data","catch","concat","goToLogin","replace","closeInfoPopup","setTimeout","children","isOpen","success","onClose","className","name","onSubmit","required","minLength","maxLength","placeholder","type","onChange","onClick"],"sources":["/Users/igorkuznecov/dev/mesto-react/src/components/Register/Register.js"],"sourcesContent":["import React from 'react';\nimport { useNavigate } from 'react-router-dom';\nimport InfoTooltip from '../InfoTooltip/InfoTooltip';\nimport { register } from '../../utils/auth';\n\nexport default function Register() {\n  const navigate = useNavigate();\n  const [email, setEmail] = React.useState('');\n  const [password, setPassword] = React.useState('');\n  const [isInfoPopupOpen, setIsInfoPopupOpen] = React.useState(false);\n  const [isRegisterSuccess, setIsRegisterSuccess] = React.useState(false);\n\n  function handleEmailChange(e) {\n    setEmail(e.target.value);\n  }\n\n  function handlePasswordChange(e) {\n    setPassword(e.target.value);\n  }\n\n  function handleSubmit(e) {\n    e.preventDefault();\n    register(password, email)\n      .then((res) => {\n        console.log(res);\n        if (res.data) {\n          setIsRegisterSuccess(true);\n          setIsInfoPopupOpen(true);\n        } else {\n          setIsRegisterSuccess(false);\n          setIsInfoPopupOpen(true);\n        }\n      })\n      .catch((res) => console.log(`catch err ${res}`));\n  }\n\n  function goToLogin() {\n    navigate('/sign-in', { replace: false });\n  }\n\n  function closeInfoPopup() {\n    setIsInfoPopupOpen(false);\n    if (isRegisterSuccess) {\n      setTimeout(() => {\n        navigate('/sign-in', { replace: true });\n      }, 500);\n    }\n  }\n\n  return (\n    <>\n      <InfoTooltip\n        isOpen={isInfoPopupOpen}\n        success={isRegisterSuccess}\n        onClose={closeInfoPopup}\n      />\n      <section className='register'>\n        <h2 className='register__title'>Регистрация</h2>\n        <form\n          name='register-form'\n          className='form register-form'\n          onSubmit={handleSubmit}\n        >\n          <input\n            required\n            minLength='6'\n            maxLength='40'\n            placeholder='Email'\n            type='email'\n            className='form__input form__input_theme-black form__input_register-email'\n            name='register-form-email'\n            value={email}\n            onChange={handleEmailChange}\n          />\n          <input\n            required\n            minLength='4'\n            maxLength='200'\n            placeholder='Пароль'\n            type='password'\n            className='form__input form__input_theme-black form__input_register-password'\n            name='register-form-password'\n            value={password}\n            onChange={handlePasswordChange}\n          />\n          <button\n            type='submit'\n            className='form__save-button form__save-button_theme-white'\n            name='register-form-save-button'\n          >\n            Зарегистрироваться\n          </button>\n          <span className='register__text'>\n            Уже зарегистрированы?{' '}\n            <a className='register__link' onClick={goToLogin}>\n              Войти\n            </a>\n          </span>\n        </form>\n      </section>\n    </>\n  );\n}\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}